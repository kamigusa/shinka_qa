# Part 0: イントロダクション - 演習と解答

**所要時間**: 10分
**難易度**: 入門
**形式**: 理解度確認（選択式・記述式）

---

## 📝 演習の目的

このPartは理論的な内容なので、演習は**理解度の確認**が中心です。
次のPartに進む前に、基本概念をしっかり理解しましょう。

---

## 問題1: テスト品質の重要性（選択式）

### 質問

本番環境でバグが発見された場合と、開発段階でバグが発見された場合のコスト差はどのくらいですか？

**選択肢**:
1. 約2倍
2. 約5倍
3. 約10倍
4. 約50倍以上

### 解答

**正解**: 4. 約50倍以上

### 解説

典型的なコスト比較：
- **開発段階**: ¥10,000 - ¥50,000
  - 開発者が即座に修正
  - 影響範囲が限定的
  - ロールバック不要

- **本番環境**: ¥500,000 - ¥2,000,000
  - 緊急対応チームの招集
  - 顧客への影響調査
  - ロールバック作業
  - 再発防止策の策定
  - 信頼性の低下

**実例**:
2012年、Knight Capital社の取引システムのバグにより、45分間で**4億4000万ドルの損失**。
たった1つのバグでした。

**教訓**:
「本番でバグを見つけるな。開発段階で見つけろ」

---

## 問題2: 手動テストの限界（記述式）

### 質問

350行の銀行口座管理モジュールに対して、手動でテストを書く場合の典型的な問題を3つ挙げてください。

### 解答例

1. **時間がかかりすぎる**
   - 所要時間: 25時間
   - コスト: ¥200,000（¥8,000/時）
   - スケジュールに間に合わない

2. **カバレッジが低い**
   - 平均カバレッジ: 35%
   - エッジケース不足
   - エラーハンドリングの漏れ

3. **バグを見逃す**
   - バグ検出率: 22%
   - 70%以上のバグが見逃される
   - 本番で問題が発生

### 評価基準

- **良い回答**: 具体的な数字や影響を含む
- **普通の回答**: 一般的な問題点を指摘
- **不十分な回答**: 抽象的すぎる

### 発展課題

あなたの経験で、手動テストが原因で発生した問題を1つ挙げてください。
（チーム内で共有すると学びが深まります）

---

## 問題3: Shinka QAの特徴（マッチング）

### 質問

以下の特徴を正しく説明と結びつけてください。

**特徴**:
A. 自動進化
B. 既存活用
C. エンタープライズ対応

**説明**:
1. 今あるテストをベースに改善する
2. 人間が考える必要がない
3. 金融システムなど本番環境での実績

### 解答

- A → 2
- B → 1
- C → 3

### 解説

#### A. 自動進化 → 2. 人間が考える必要がない

```bash
# コマンド1つで実行
shinka-qa evolve --config quality_config.yaml

# あとは待つだけ
# - エッジケースの特定
# - テストの生成
# - 評価と改善
# 全て自動
```

#### B. 既存活用 → 1. 今あるテストをベースに改善する

```python
# 既存テスト（保持される）
def test_basic():
    assert add(1, 1) == 2

# 追加されるテスト
def test_add_edge_cases():
    assert add(0, 0) == 0
    assert add(-1, 1) == 0
```

ゼロから書き直す必要はありません。

#### C. エンタープライズ対応 → 3. 金融システムなど本番環境での実績

- SOX法対応
- Basel III準拠
- FISC安全基準
- 大規模コードベース（10万行以上）

---

## 問題4: Before/After比較（コードリーディング）

### 質問

以下のBeforeとAfterのテストコードを比較して、改善点を3つ以上挙げてください。

#### Before
```python
def test_divide():
    assert divide(10, 2) == 5.0
```

#### After
```python
import pytest

def test_divide():
    assert divide(10, 2) == 5.0

def test_divide_by_zero():
    with pytest.raises(ValueError):
        divide(10, 0)

@pytest.mark.parametrize("a,b,expected", [
    (10, 2, 5.0),
    (-10, 2, -5.0),
    (10, -2, -5.0),
])
def test_divide_signs(a, b, expected):
    assert divide(a, b) == expected
```

### 解答例

1. **エラーハンドリングの追加**
   - `test_divide_by_zero`でゼロ除算のテスト
   - 例外の型（ValueError）も検証

2. **パラメータ化テストの導入**
   - 複数のケースを効率的にテスト
   - 正の数、負の数の組み合わせ

3. **境界値テストの追加**
   - 正の数同士
   - 負の数を含む除算
   - 符号の組み合わせ

4. **カバレッジの向上**
   - Before: 1パターンのみ
   - After: 4パターン + エラーケース

5. **保守性の向上**
   - パラメータ化により、新しいケース追加が容易
   - テストの意図が明確

### 評価基準

- **5つ以上**: 優秀！細部まで理解している
- **3-4つ**: 良好。基本を理解している
- **1-2つ**: 最低限。ガイドを再読してください

---

## 問題5: 環境確認（実践）

### 質問

以下のコマンドを実行し、結果をレポートしてください。

```bash
# 1. Pythonバージョン確認
python --version

# 2. pipバージョン確認
pip --version

# 3. Gitバージョン確認
git --version
```

### 解答フォーマット

```
【環境情報】
OS: [Windows/Mac/Linux]
Python: [バージョン]
pip: [バージョン]
Git: [バージョン]

【判定】
- Python 3.11以上: [OK/NG]
- pip 23以上: [OK/NG]
- Git 2.x: [OK/NG]

【備考】
[問題があれば記載]
```

### 解答例

```
【環境情報】
OS: Windows 11
Python: 3.12.0
pip: 24.0
Git: 2.42.0

【判定】
- Python 3.11以上: OK ✓
- pip 23以上: OK ✓
- Git 2.x: OK ✓

【備考】
全ての要件を満たしています。Part 1に進めます。
```

### トラブルシューティング

#### 問題: Pythonが3.11未満

**解決策**:
1. [python.org](https://python.org)から最新版をダウンロード
2. インストール時に「Add to PATH」をチェック
3. ターミナルを再起動

#### 問題: コマンドが見つからない

**Windows**:
```powershell
# Pythonの場所を確認
where python

# PATHに追加されているか確認
$env:Path
```

**Mac/Linux**:
```bash
# Pythonの場所を確認
which python3

# .bashrc または .zshrc を確認
echo $PATH
```

---

## 問題6: 適用シナリオ（ケーススタディ）

### 質問

あなたのチームには以下のプロジェクトがあります。
Shinka QAを最初に適用すべきなのはどれですか？理由と共に答えてください。

**プロジェクト一覧**:

1. **新規プロジェクト** (開発開始から1週間)
   - コード: 500行
   - テスト: 20個
   - カバレッジ: 85%
   - 問題: 特になし

2. **レガシーシステム** (運用10年)
   - コード: 50,000行
   - テスト: 100個
   - カバレッジ: 15%
   - 問題: リファクタリングできない

3. **中規模プロジェクト** (運用2年)
   - コード: 5,000行
   - テスト: 200個
   - カバレッジ: 45%
   - 問題: 月1-2回の本番バグ

### 解答

**推奨**: 3. 中規模プロジェクト

### 理由

#### なぜ3が最適か

**メリット**:
1. **適度なサイズ**
   - 5,000行は学習に最適
   - 結果がすぐに見える
   - 失敗しても影響が小さい

2. **改善効果が大きい**
   - カバレッジ 45% → 85%以上に改善可能
   - 本番バグを大幅削減
   - ROIが明確

3. **既存テストが活かせる**
   - 200個のテストがベースとして使える
   - ゼロから始める必要がない

**実施計画**:
```
Week 1: パイロット実施
Week 2: 結果評価
Week 3: チーム展開
Week 4: CI/CD統合
```

#### なぜ1は推奨しないか

- カバレッジが既に高い（85%）
- 改善余地が小さい
- 学習材料として不適切

**代替案**:
新規プロジェクトでは、最初からShinka QAをテスト作成に使用

#### なぜ2は最初に選ばないか

- 50,000行は初回には大きすぎる
- リスクが高い
- 学習曲線が急

**代替案**:
1. まず中規模で経験を積む
2. 成功事例を作る
3. その後、レガシーに適用

**段階的アプローチ**:
```
Phase 1: 中規模プロジェクト (Week 1-4)
Phase 2: レガシーの一部モジュール (Week 5-8)
Phase 3: レガシー全体 (Week 9-12)
```

### 評価基準

- **優秀**: 理由が3つ以上、段階的アプローチを提案
- **良好**: 理由が2つ、基本的な計画
- **要改善**: 理由が1つのみ

---

## 問題7: 期待値設定（選択式）

### 質問

Shinka QAを使用した場合、350行のモジュールでどのくらいのカバレッジ改善が期待できますか？

**前提**:
- 初期カバレッジ: 35%
- 初期テスト数: 5個
- 進化世代数: 5世代

**選択肢**:
1. 40-50%（+5-15ポイント改善）
2. 60-70%（+25-35ポイント改善）
3. 85-95%（+50-60ポイント改善）
4. 100%（+65ポイント改善）

### 解答

**正解**: 3. 85-95%（+50-60ポイント改善）

### 解説

#### 典型的な改善曲線

```
世代0（初期）: 35%
世代1: 45% (+10pt)
世代2: 62% (+17pt)
世代3: 78% (+16pt)
世代4: 88% (+10pt)
世代5: 92% (+4pt)
```

**特徴**:
- 最初の2-3世代で大幅改善
- その後は逓減（収束）
- 100%は通常達成しない（到達不能コードがある）

#### なぜ100%にならないか

**理由**:
1. デッドコード（使われていないコード）
2. 防御的プログラミング（起こり得ないエラー処理）
3. レガシーコード（歴史的理由で残存）

**例**:
```python
def process(data):
    if data is None:
        # 実際には None が渡されることはない
        # でも念のため書いてある
        raise ValueError("Data cannot be None")
    # ...
```

#### 現実的な目標

- **良い**: 85%以上
- **優秀**: 90%以上
- **完璧主義**: 95%以上（コスト大）

**推奨**:
「80/20の法則」を適用。
- 80%のカバレッジで、20%の労力
- 残り20%のカバレッジで、80%の労力

---

## 📊 演習の総括

### 採点基準

| 問題 | 配点 | あなたの得点 |
|------|------|--------------|
| 問題1 | 10点 | ___ |
| 問題2 | 15点 | ___ |
| 問題3 | 10点 | ___ |
| 問題4 | 20点 | ___ |
| 問題5 | 15点 | ___ |
| 問題6 | 20点 | ___ |
| 問題7 | 10点 | ___ |
| **合計** | **100点** | ___ |

### 評価

- **90点以上**: 完璧！Part 1に進んでください
- **70-89点**: 良好。不明点を復習してPart 1へ
- **50-69点**: 基本は理解。ガイドを再読推奨
- **49点以下**: ガイドを再読し、講師に質問してください

---

## 🎯 次のステップ

全ての問題に取り組みましたか？

✓ **はい** → Part 1: はじめての進化に進みましょう！
✗ **いいえ** → 時間を取って全問題に取り組んでください

### Part 1の予習

次のPartでは、実際にShinka QAを動かします。

**準備**:
1. ターミナルを開いておく
2. エディタを起動しておく
3. 集中できる環境を確保

**心構え**:
- 失敗を恐れない
- わからないことは質問する
- 手を動かして学ぶ

---

## 💬 フィードバック

この演習について、感想や改善提案があればお聞かせください：

```
【良かった点】


【改善してほしい点】


【もっと知りたいこと】

```

---

**作成日**: 2025-11-07
**更新日**: 2025-11-07
**バージョン**: 1.0
